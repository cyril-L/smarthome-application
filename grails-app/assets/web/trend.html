<html>
<head>
    <title>Conso Heroes − Ma conso</title>
    <!-- You can use Open Graph tags to customize link previews.
    Learn more: https://developers.facebook.com/docs/sharing/webmasters -->
    <meta property="og:url"           content="https://dc.breizh-sen2.eu/assets/trend.html" />
    <meta property="og:type"          content="website" />
    <meta property="og:title"         content="Conso Heroes − Ma conso" />
    <meta property="og:description"   content="+ 40 % du 1er au 27 septembre" />
    <meta property="og:image"         content="https://dc.breizh-sen2.eu/assets/trend.png" />
    <style>
        .rounded {
            background-color: #f5f6f7;
            border: none;
            color: #46494f;
            padding: 8px 20px;
            text-align: right;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            border-radius: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v8.0" nonce="saz6CYUf"></script>

<p><img class="copy" src="https://dc.breizh-sen2.eu/assets/trend.png" alt="+ 40 % du 1er au 27 septembre"/></p>
<h2>Options pour le partage</h2>
<h3>1) Lien vers une image</h3>

<div class="fb-share-button" data-href="https://dc.breizh-sen2.eu/assets/trend.png" data-layout="button" data-size="large"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdc.breizh-sen2.eu%2Fassets%2Ftrend.png&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Partager</a></div>

<h3>2) Lien vers une page web</h3>

<div class="fb-share-button" data-href="https://dc.breizh-sen2.eu/assets/trend.html" data-layout="button" data-size="large"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdc.breizh-sen2.eu%2Fassets%2Ftrend.html&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Partager</a></div>

<h3>3) Copie dans le presse papier</h3>

<button class="rounded">↷ Partager</button>

<script>
    // @return Promise<boolean>
    async function askWritePermission() {
        try {
            // The clipboard-write permission is granted automatically to pages
            // when they are the active tab. So it's not required, but it's more safe.
            const { state } = await navigator.permissions.query({ name: 'clipboard-write' })
            return state === 'granted'
        } catch (error) {
            // Browser compatibility / Security error (ONLY HTTPS) ...
            return false
        }
    }

    // @params blob - The ClipboardItem takes an object with the MIME type as key, and the actual blob as the value.
    // @return Promise<void>
    const setToClipboard = async blob => {
        const data = [new ClipboardItem({ [blob.type]: blob })]
        await navigator.clipboard.write(data)
    }



    var copyBobBtn = document.querySelector('.rounded');

    copyBobBtn.addEventListener('click', async function(event) {

        // Can we copy a text or an image ?
        const canWriteToClipboard = await askWritePermission()

        // Copy a PNG image to clipboard
        if (canWriteToClipboard) {
            const response = await fetch('https://dc.breizh-sen2.eu/assets/trend.png')
            const blob = await response.blob()
            await setToClipboard(blob)
        }

        alert("Image copiée dans le presse papier !")
    });
</script>

</body>
</html>